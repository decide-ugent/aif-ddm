# Scripts for model recovery analysis

### Contents
- ```synthetic_data_generator_model_recovery_analysis.ipynb``` – Jupyter notebook to generate a simulated dataset for a given model
- ```fit_synthetic_data_model_recovery.py``` – Python script to fit a given model to a simulated dataset generated by another (or the same) givel model
- ```model_recovery_analysis.ipynb``` – Jupyter notebook to visualise confusion matrices  

## How to run

1. Run the Jupyter notebook ```synthetic_data_generator_model_recovery_analysis.ipynb``` to generate a simulated dataset for each of the models you are testing. Note that you must change the appropriate variables every time you run it. Each run will generate a subfolder with the corresponding simulated dataset inside a folder called ```synthetic_datasets```. Inside the Jupyter notebook, you will find:
   ```bash
   # Model class. Options: "RL", "RL_ddm", "RL_ddm_biased", "AI", or "AI_ddm".
   model = "RL_ddm_biased"
   
   # Subclass of Active Inference model (only used if model is "AI" or "AI_ddm").
   # Options: 0, 1, 2, or 3.
   mtype = 3
   
   # Drift rate model. Options: "linear", "sigmoid", "sigmoid_single_v_mod", "sigmoid_single_v_max".
   drmtype = "linear"
   
   # Dataset name.
   dataset = "magic_carpet_2020"
   ```

2. Inside this folder, for each of the models you would like to test, run the script ```fit_synthetic_data_model_recovery.py```. Note that for each combination of model used to generate data, and model used to fit the data, you must change the variables accordingly in the script:
   ```bash
   """---------------SELECT MODEL AND SET VARIABLES ---------------"""

   # -------------Information for the model used to fit the synthetic data--------:
   model = "AI" # RL, RL_ddm, RL_ddm_biased, AI, or AI_ddm
   mtype = 1 # 0, 1, 2 or 3 (only relevant if model = AI or AI_ddm)
   drmtype = "linear" # Drift rate model: linear, sigmoid, sigmoid_single_v_mod, sigmoid_single_v_max
   
   # -------------Information for the model used to generate the synthetic data--------:
   model_synthetic_data_generator = "AI" # Model used to generate synthetic dataset: RL, RL_ddm, RL_ddm_biased, AI, or AI_ddm
   mtype_synthetic_data_generator = 0 # Type of model used to generate synthetic dataset: 0, 1, 2 or 3 (only relevant if model = AI or AI_ddm)
   drmtype_synthetic_data_generator = "linear" # Drift rate model: linear, sigmoid, sigmoid_single_v_mod, sigmoid_single_v_max
   ```

3. Once all the simulated data has been fitted, you can visualize the corresponding Confusion Matrices by running the ```model_recovery_analysis.ipynb``` Jupyter notebook. Note that if you want to compare different models to that of the paper, you will need to modify this script.
   

   

